# HBase in action 读书笔记

### 是什么?
1. Hbase 是一种 `NoSQL` 存储系统,专门设计用来 `快速随机读写` 大规模数据.HBase运行在普通商用服务器上,可以 `平滑扩展`,以支持从中等规模到数十亿行,数百万列的数据集.
2. HBase是一种数据库:Hadoop数据库.它经常被描述为一种 `稀疏的,分布式的,持久化的,多维有序映射`,它基于 `行键(row key),列键(column key)和时间戳(timestamp)` 建立索引.
3. 是一种 `键值(key value)存储,面向列族` 的数据库
4. 是一种存储 `多时间戳版本` 映射的数据库.
5. 是一个可以随机访问数据库,可以自如地存储 `结构化和半结构化` 数据.
6. 可以存储 `非结构化` 数据,只要量不是很大.
7. 不同于传统的关系型数据库,HBase不需要预先定义`schema(模式)和数据类型`,更加动态,灵活,可以在一行某列存字符串,而在另一行同一列存储数字.
8. HBase被设计成在一个服务器集群上运行,而不是单机.方便横向扩展(水平扩展).

### 为什么?
#### 传统关系型数据库
1. 关系理论的基础 集合论
2. 三大范式 冗余字段拆分
3. 预先定义`schema(模式)和数据类型`
4. 联合查询 表链接
5. 事务
6. ACID Automicity(原子性),Consistency(一致性),Isolation(隔离性),Durability(持久性)
7. OLTP 联机事务处理,在线事务
8. OLAP 联机分析处理,离线分析

#### 传统关系型数据库不足
##### 1. 对象-关系不匹配问题
传统的数据库应用软件开发,程序员很难从符合`三大范式`的数据模型当中获得有效的查询性能.符合三大范式就意味着数据库表会拆分的很细,表间关联很多,统计分析查询就不可避免的导致n张表的`联合查询`,在没有有效的应用层缓存的情况下,这种查询无可避免的性能低下.这使得程序员宁肯违背三大范式,而选择查询性能好的数据库设计.

因为数据库设计遵循先范化,再优化.所以基本上最后的设计都不是范化的,也很难找到这样的范化设计.
特别是在一些为了统计分析方便的系统中,增加了大量冗余的统计信息.

[阻抗不匹配](https://baike.baidu.com/item/%E9%98%BB%E6%8A%97%E4%B8%8D%E5%8C%B9%E9%85%8D/)
持久化存储数据所采用的数据模型(无论是文件系统还是数据库管理系统)如果与编写程序(C++,Smalltalk,VisualBasic,Java,C#)时所采用的数据模型有差异,就称为"阻抗不匹配”问题.
"阻抗不匹配”是企业里的严重问题,高达25-33%的开发时间浪费在努力将对象挤压进关系型的持久化,也就是一般说的`对象关系映射(ORM)`.虽然ORM工具的例子都着力演示其简易,但`现实的情况要复杂`好几个数量级,于是整个ORM的概念都没法站住脚.即便最优秀的ORM工具也会创建出`效率极低`的模型,导致严重的性能问题.

##### 2. 半结构化,非结构化数据
比如:日志文件


##### 3. 大数据量
比如:日志文件,数据量高了几个数量级.

**解决办法**
重写框架,不用关系型数据库.

google公司的三篇论文:
[Google File System]()
[MapReduce]()
[BigTable]()

### 一些常见名词和基本概念

NoSQL
数据库类型
传统的关系型数据库
图数据库
层次型数据库
键值数据库
内存数据库
著名的NoSQL数据库:
Redis,Google BigTable,Amazon Dynamo DB,Facebook Cassandra,MongoDB,HBase

schema
模式

Hadoop

MapReduce

ZooKeeper

分布式

集群

CAP

一致性
1. 强一致性
2. 完全一致性


扩展性

水平扩展

垂直扩展

### 第一部分 基础

#### 第一章 HBase介绍

上面谈到了传统关系数据库在处理`半结构化,非结构化`数据时的不足:`存储模式`,`数据量`,解决办法就是:重写框架,不用关系型数据库,重新开发数据库.

google公司的三篇论文:
[Google File System]()
[MapReduce]()
[BigTable]()

**BigTable发明的原因:**
Google `搜索索引` 的生成.
1. 索引是:关键字$\to$文档的映射
2. 文档是整个互联网,数据量很大,而且是非结构化数据

Google设计了BigTable+MapReduce的生成`搜索索引`的高效算法.

**就是这样一个设计初衷是用来存储互联网持续更新网页副本的技术,用在互联网相关的其他方面也是很合适的.**

HBase就是模仿BigTable而推出的.

数据量大,MySQL集群负载达不到要求
[mysql和hbase应用场景对比](https://blog.csdn.net/a519781181/article/details/79423512)

[那么问题来了:我们为什么要选择 Hbase?](https://m.aliyun.com/yunqi/articles/54410)

HBase可以方便地横向扩展.

HBase是Hadoop技术家族一员,可以很好地对接 MapReduce 来实现批处理.